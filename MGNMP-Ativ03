#include <stdio.h>
#include <stdlib.h>

int fbissexto(int c)  //função para verificar se o ano é ou não bissexto
{        
        // 1 para verdadeiro e 0 para falso
        if((c%4 == 0) && (c%100 != 0) || (c%400 == 0))
	        return 1;
	    else
	        return 0;
}

int fverificador(int a,int b,int c)  //função para verificar a data segundo a organização so calendáwio
{                                    
        // 1 para verdadeiro e 0 para falso
	    if(a > 31)
	    {
	    	return 0;
		}
		else if(a < 0 || b < 0 || c < 0)
		{
			return 0;
		}
		else if(b > 12)
		{
			return 0;
		}
		else if(c < 1600 || c > 5000)
		{
			return 0;
		}
		else if((b == 4 || b == 6 || b == 9 || b == 11) && a > 30)
		{
			return 0;
		}
	    else
		{
			return 1;
		}
		
}

int fdiasquefaltam(int a,int b,int c)
{
	int mesesdoano[12] = {31,28,31,30,31,30,31,31,30,31,30,31};
	int total = 0, diasdoano = 365, diasquefaltam;
	
	if(c == 1)
	{
	    mesesdoano[1] = 29;
	}
	
	for (int i = 0; i < a - 1; i++)
	{
		total = total + mesesdoano[i];
	}
	
	total = total + b;
	diasquefaltam = diasdoano - total;
	
	return diasquefaltam;

}

int fdiasquepassaram(int a,int b,int c)
{
	int mesesdoano[12] = {31,28,31,30,31,30,31,31,30,31,30,31};
	int total = 0, diasdoano = 365, diasquefaltam, diasquepassaram;
	
	if(c == 1)
	{
	    mesesdoano[1] = 29;
	}
	
	for (int i = 0; i < a - 1; i++)
	{
		total = total + mesesdoano[i];
	}
	
	total = total + b;
	
	return total;
}


int main(void)
{
	
	int ano, mes, dia;  //declarando variaveis
	int bissexto;
	
	printf("+-------------------------------------------------------------------------------------------+\n");
	printf("|         PRograma de verificacao de data e dias percorridos e que faltam em um ano         |\n");
	printf("|                                                                                           |\n");
	printf("|                                    por Matheus Noronha                                    |\n");
	printf("+-------------------------------------------------------------------------------------------+\n\n");
	
	
	do
	{
		printf("digite uma data no formato DD/MM/AAAA 01/01/1600 e 31/12/5000(zero para sair): ");
		scanf("%d/%d/%d", &dia, &mes, &ano);
		
		//condições de verificação
		if(dia == 0)
		{
			break;
		}
		else if(fverificador(dia,mes,ano) == 1)
		{
			bissexto = fbissexto(ano);
			
			printf("\nData %d/%d/%d   %d dias desde o inicio e %d ate o fim do ano\n\n", dia, mes, ano, fdiasquepassaram(mes,dia,bissexto), fdiasquefaltam(mes,dia,bissexto));
		}		
		else if(fverificador(dia,mes,ano) == 0)
		{  
		    printf("\nano ivalido, tente novamente\n\n"); 
		}
		
	system("pause");    //Pausa no loop
	printf("\n");	
		
   }while (dia != 0);  //enquanto dia for diferente de zero o programa recicla
   
  printf("\n\nFim, obrigado\n\n");      //mensagem de saida do programa
   
  system("pause");  /*É usado mo final pois fora da IDE(no terminal) o programa simplesmente fecha sem pedir confirmação*/
  return 0;
  
}
